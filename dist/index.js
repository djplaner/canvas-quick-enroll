(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();function m(){}function R(t){return t()}function I(){return Object.create(null)}function y(t){t.forEach(R)}function B(t){return typeof t=="function"}function J(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function K(t){return Object.keys(t).length===0}function W(t,e){t.appendChild(e)}function z(t,e,n){const r=G(t);if(!r.getElementById(e)){const o=b("style");o.id=e,o.textContent=n,V(r,o)}}function G(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function V(t,e){return W(t.head||t,e),e.sheet}function d(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode.removeChild(t)}function b(t){return document.createElement(t)}function P(t){return document.createTextNode(t)}function x(){return P(" ")}function M(){return P("")}function F(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function Q(t){return function(e){return e.preventDefault(),t.call(this,e)}}function v(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Y(t){return Array.from(t.childNodes)}let w;function p(t){w=t}const h=[],O=[],g=[],S=[],Z=Promise.resolve();let k=!1;function ee(){k||(k=!0,Z.then(X))}function E(t){g.push(t)}const $=new Set;let _=0;function X(){const t=w;do{for(;_<h.length;){const e=h[_];_++,p(e),te(e.$$)}for(p(null),h.length=0,_=0;O.length;)O.pop()();for(let e=0;e<g.length;e+=1){const n=g[e];$.has(n)||($.add(n),n())}g.length=0}while(h.length);for(;S.length;)S.pop()();k=!1,$.clear(),p(t)}function te(t){if(t.fragment!==null){t.update(),y(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(E)}}const ne=new Set;function oe(t,e){t&&t.i&&(ne.delete(t),t.i(e))}function re(t,e,n,r){const{fragment:o,after_update:s}=t.$$;o&&o.m(e,n),r||E(()=>{const i=t.$$.on_mount.map(R).filter(B);t.$$.on_destroy?t.$$.on_destroy.push(...i):y(i),t.$$.on_mount=[]}),s.forEach(E)}function se(t,e){const n=t.$$;n.fragment!==null&&(y(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function le(t,e){t.$$.dirty[0]===-1&&(h.push(t),ee(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ie(t,e,n,r,o,s,i,l=[-1]){const u=w;p(t);const c=t.$$={fragment:null,ctx:[],props:s,update:m,not_equal:o,bound:I(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:I(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};i&&i(c.root);let C=!1;if(c.ctx=n?n(t,e.props||{},(f,j,...N)=>{const U=N.length?N[0]:j;return c.ctx&&o(c.ctx[f],c.ctx[f]=U)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](U),C&&le(t,f)),j}):[],c.update(),C=!0,y(c.before_update),c.fragment=r?r(c.ctx):!1,e.target){if(e.hydrate){const f=Y(e.target);c.fragment&&c.fragment.l(f),f.forEach(a)}else c.fragment&&c.fragment.c();e.intro&&oe(t.$$.fragment),re(t,e.target,e.anchor,e.customElement),X()}p(u)}class ce{$destroy(){se(this,1),this.$destroy=m}$on(e,n){if(!B(n))return m;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const o=r.indexOf(n);o!==-1&&r.splice(o,1)}}$set(e){this.$$set&&!K(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const q=async t=>{const e=t;try{const n=await fetch(e);return n.status===404||n.status===401?null:await n.json()}catch(n){console.error(`Could not fetch requested information: ${n}`)}},ue=async(t,e)=>{const n=t;try{const r=await fetch(n,{method:"DELETE",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-Token":e}});return r.status===404||r.status===401?null:await r.json()}catch(r){console.error(`Could not delete requested information: ${r}`)}},fe=async(t,e,n)=>{try{const r=await fetch(t,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-Token":n},body:JSON.stringify(e)});return r.status===404||r.status===401?null:await r.json()}catch(r){console.error(`Could not post requested information: ${r}`)}};class ae{constructor(e){this.finishedCallBack=e,this.csrf=this.getCsrfToken(),this.currentHostName=document.location.hostname,this.baseApiUrl=`https://${this.currentHostName}/api/v1/courses/`,this.courseId=window.location.href.split("/")[window.location.href.split("/").indexOf("courses")+1],this.courseId=parseInt(this.courseId),this.getCanvasUser()}getCanvasUser(){q(`https://${this.currentHostName}/api/v1/users/self`).then(e=>{this.user=e,this.getUsersEnrollments()})}getUsersEnrollments(){q(`https://${this.currentHostName}/api/v1/users/self/enrollments?type[]=DesignerEnrollment&per_page=100`).then(e=>{this.enrollments=e,console.log("-------------getUsersEnrollments"),console.log(this.enrollments),console.log("-------------getUsersEnrollments"),this.finishedCallBack()})}getEnrollmentStatus(){const e=this.enrollments.filter(r=>r.course_id===this.courseId).length,n=this.getCourseEnrollementObject(this.courseId);return console.log(`-------------getEnrollmentStatus -- ${e}`),console.log(n),n!==void 0}getCourseEnrollementObject(e){return this.enrollments.find(n=>n.course_id===e)}enrollUser(){const e={enrollment:{user_id:this.user.id,type:"DesignerEnrollment",enrollment_state:"active"}};fe(`https://${this.currentHostName}/api/v1/courses/${this.courseId}/enrollments`,e,this.csrf).then(n=>{this.getUsersEnrollments()})}unEnrollUser(){const e=this.getCourseEnrollementObject(this.courseId);if(e===void 0){console.error(`Could not find enrollment object for course ${this.courseId}`);return}ue(`https://${this.currentHostName}/api/v1/courses/${this.courseId}/enrollments/${e.id}`,this.csrf).then(n=>{this.getUsersEnrollments()})}getCsrfToken(){let e=new RegExp("^_csrf_token=(.*)$"),n=document.cookie.split(";");for(let r=0;r<n.length;r++){let o=n[r].trim(),s=e.exec(o);if(s)return decodeURIComponent(s[1])}return null}}function de(t){z(t,"svelte-oue8fh","button.canvas-quick-enrol.svelte-oue8fh{margin-left:2rem;margin-top:1rem;margin-bottom:1rem}")}function D(t){let e,n,r,o=t[1]===null&&T(),s=t[1]===!1&&A(t),i=t[1]===!0&&L(t);return{c(){o&&o.c(),e=x(),s&&s.c(),n=x(),i&&i.c(),r=M()},m(l,u){o&&o.m(l,u),d(l,e,u),s&&s.m(l,u),d(l,n,u),i&&i.m(l,u),d(l,r,u)},p(l,u){l[1]===null?o||(o=T(),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),l[1]===!1?s?s.p(l,u):(s=A(l),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),l[1]===!0?i?i.p(l,u):(i=L(l),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},d(l){o&&o.d(l),l&&a(e),s&&s.d(l),l&&a(n),i&&i.d(l),l&&a(r)}}}function T(t){let e;return{c(){e=b("button"),e.textContent="Waiting...",e.disabled=!0,v(e,"class","canvas-quick-enrol svelte-oue8fh")},m(n,r){d(n,e,r)},d(n){n&&a(e)}}}function A(t){let e,n,r;return{c(){e=b("button"),e.textContent="Quick Enroll",v(e,"class","canvas-quick-enrol svelte-oue8fh")},m(o,s){d(o,e,s),n||(r=F(e,"click",Q(t[2])),n=!0)},p:m,d(o){o&&a(e),n=!1,r()}}}function L(t){let e,n,r;return{c(){e=b("button"),e.textContent="Unenroll",v(e,"class","canvas-quick-enrol svelte-oue8fh")},m(o,s){d(o,e,s),n||(r=F(e,"click",Q(t[3])),n=!0)},p:m,d(o){o&&a(e),n=!1,r()}}}function me(t){let e,n=t[0]&&D(t);return{c(){n&&n.c(),e=M()},m(r,o){n&&n.m(r,o),d(r,e,o)},p(r,[o]){r[0]?n?n.p(r,o):(n=D(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:m,o:m,d(r){n&&n.d(r),r&&a(e)}}}function he(t,e,n){let r=!1,o=null;location.pathname.match(/^\/courses\/\d+\/*$/)&&(r=!0);const i=function(){n(1,o=l.getEnrollmentStatus())};let l=new ae(i);function u(){n(1,o=l.enrollUser())}function c(){n(1,o=l.unEnrollUser())}return[r,o,u,c]}class pe extends ce{constructor(e){super(),ie(this,e,he,me,J,{},de)}}const H=document.getElementById("left-side");H&&H.insertAdjacentHTML("afterbegin",'<div id="canvas-quick-enroll"></div>');new pe({target:document.getElementById("canvas-quick-enroll")});
